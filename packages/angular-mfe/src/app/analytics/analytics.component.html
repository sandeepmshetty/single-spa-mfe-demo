<div class="analytics-container">
  <!-- Header with filters -->
  <div class="analytics-header">
    <h1>📊 Analytics Dashboard</h1>
    <div class="filter-controls">
      <select class="select-input" [(ngModel)]="selectedDateRange" (change)="onDateRangeChange()">
        <option value="7d">Last 7 days</option>
        <option value="30d">Last 30 days</option>
        <option value="90d">Last 90 days</option>
      </select>
      
      <button class="btn btn-primary" (click)="exportData()">
        📥 Export
      </button>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div class="loading-container" *ngIf="loading">
    <div class="spinner">⏳</div>
    <p>Loading analytics data...</p>
  </div>

  <!-- Analytics Content -->
  <div class="analytics-content" *ngIf="!loading">
    <!-- User Metrics -->
    <div class="metrics-section">
      <h2>👥 User Metrics</h2>
      <div class="user-metrics-grid">
        <div class="metric-card">
          <div class="metric-icon">👥</div>
          <div class="metric-info">
            <div class="metric-value">{{ userMetrics.totalUsers | number }}</div>
            <div class="metric-label">Total Users</div>
          </div>
        </div>
        
        <div class="metric-card active">
          <div class="metric-icon">🟢</div>
          <div class="metric-info">
            <div class="metric-value">{{ userMetrics.activeUsers | number }}</div>
            <div class="metric-label">Active Users</div>
          </div>
        </div>
        
        <div class="metric-card new">
          <div class="metric-icon">➕</div>
          <div class="metric-info">
            <div class="metric-value">{{ userMetrics.newUsers | number }}</div>
            <div class="metric-label">New Users</div>
          </div>
        </div>
        
        <div class="metric-card returning">
          <div class="metric-icon">🔄</div>
          <div class="metric-info">
            <div class="metric-value">{{ userMetrics.returningUsers | number }}</div>
            <div class="metric-label">Returning Users</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Page Views Analysis -->
    <div class="analytics-row">
      <div class="card page-views-card">
        <div class="card-header">
          <h3>📄 Top Pages</h3>
          <p>Most visited pages this month</p>
        </div>
        <div class="card-content">
          <div class="page-views-list">
            <div *ngFor="let page of pageViews" class="page-view-item">
              <div class="page-info">
                <div class="page-name">{{ page.page }}</div>
                <div class="page-views">{{ page.views | number }} views</div>
              </div>
              <span class="change-badge" 
                [ngClass]="{
                  'positive': page.change.includes('+'),
                  'negative': page.change.includes('-')
                }">
                {{ page.change }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Analytics Chart Placeholder -->
      <div class="card chart-card">
        <div class="card-header">
          <h3>📊 Traffic Overview</h3>
        </div>
        <div class="card-content">
          <div class="chart-placeholder">
            <div class="chart-icon">📈</div>
            <p>Traffic analytics chart</p>
            <p class="chart-note">Real-time traffic visualization</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Real-time Events -->
    <div class="events-section">
      <div class="card">
        <div class="card-header">
          <h3>⚡ Real-time Events</h3>
          <p>Events from micro-frontends</p>
        </div>
        <div class="card-content">
          <div class="events-info">
            <p>This section tracks cross-MFE events in real-time:</p>
            <ul>
              <li>🛒 Product additions to cart</li>
              <li>🔐 User authentication events</li>
              <li>🧭 Navigation tracking</li>
              <li>⚡ Custom business events</li>
            </ul>
            <p class="note">Interact with other micro-frontends to see events here.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>